(()=>{var e=[,(e,t,r)=>{var o=r(2),n=r(3);e.exports=function(e,t,r){var a=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return n(r)&&(a="leading"in r?!!r.leading:a,i="trailing"in r?!!r.trailing:i),o(e,t,{leading:a,maxWait:t,trailing:i})}},(e,t,r)=>{var o=r(3),n=r(4),a=r(7),i=Math.max,_=Math.min;e.exports=function(e,t,r){var E,s,O,S,c,T,u=0,l=!1,R=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function A(t){var r=E,o=s;return E=s=void 0,u=t,S=e.apply(o,r)}function P(e){return u=e,c=setTimeout(p,t),l?A(e):S}function m(e){var r=e-T;return void 0===T||r>=t||r<0||R&&e-u>=O}function p(){var e=n();if(m(e))return L(e);c=setTimeout(p,function(e){var r=t-(e-T);return R?_(r,O-(e-u)):r}(e))}function L(e){return c=void 0,d&&E?A(e):(E=s=void 0,S)}function I(){var e=n(),r=m(e);if(E=arguments,s=this,T=e,r){if(void 0===c)return P(T);if(R)return clearTimeout(c),c=setTimeout(p,t),A(T)}return void 0===c&&(c=setTimeout(p,t)),S}return t=a(t)||0,o(r)&&(l=!!r.leading,O=(R="maxWait"in r)?i(a(r.maxWait)||0,t):O,d="trailing"in r?!!r.trailing:d),I.cancel=function(){void 0!==c&&clearTimeout(c),u=0,E=T=s=c=void 0},I.flush=function(){return void 0===c?S:L(n())},I}},e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},(e,t,r)=>{var o=r(5);e.exports=function(){return o.Date.now()}},(e,t,r)=>{var o=r(6),n="object"==typeof self&&self&&self.Object===Object&&self,a=o||n||Function("return this")();e.exports=a},(e,t,r)=>{var o="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=o},(e,t,r)=>{var o=r(8),n=r(3),a=r(10),i=/^[-+]0x[0-9a-f]+$/i,_=/^0b[01]+$/i,E=/^0o[0-7]+$/i,s=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=o(e);var r=_.test(e);return r||E.test(e)?s(e.slice(2),r?2:8):i.test(e)?NaN:+e}},(e,t,r)=>{var o=r(9),n=/^\s+/;e.exports=function(e){return e?e.slice(0,o(e)+1).replace(n,""):e}},e=>{var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},(e,t,r)=>{var o=r(11),n=r(15);e.exports=function(e){return"symbol"==typeof e||n(e)&&"[object Symbol]"==o(e)}},(e,t,r)=>{var o=r(12),n=r(13),a=r(14),i=o?o.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?n(e):a(e)}},(e,t,r)=>{var o=r(5).Symbol;e.exports=o},(e,t,r)=>{var o=r(12),n=Object.prototype,a=n.hasOwnProperty,i=n.toString,_=o?o.toStringTag:void 0;e.exports=function(e){var t=a.call(e,_),r=e[_];try{e[_]=void 0;var o=!0}catch(e){}var n=i.call(e);return o&&(t?e[_]=r:delete e[_]),n}},e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},e=>{e.exports=function(e){return null!=e&&"object"==typeof e}}],t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=r(1),t=r.n(e);function o(){const e=1==(void 0!==navigator.userAgentData&&void 0!==navigator.userAgentData.platform)?navigator.userAgentData:navigator.userAgent;if("string"==typeof e)switch(!0){case e.indexOf("Chrome")>-1:return"chrome";case e.indexOf("Firefox")>-1:return"firefox";case e.indexOf("Safari")>-1:return"safari"}else switch(!0){case Boolean(e.brands.find((e=>"Chromium"===e.brand))):return"chrome";case Boolean(e.brands.find((e=>"Firefox"===e.brand||"Mozilla"===e.brand))):return"firefox";case Boolean(e.brands.find((e=>"Safari"===e.brand))):return"safari"}return null}window.location,window.parent.location;const n="firefox"===o(),a="safari"===o();function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const _={addMessageListener:function(e){chrome.runtime.onMessage.addListener((function(t,r,o){return e(t,r,o),!0}))},handleResponse:s,get messageCallbacks(){return window.messageCallbacks},onMessage:function(e){return function(t,r,o){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){}t.name?t.name.indexOf("re:")>-1?s(t):e(t,r,o):t.cmd?(t.name="toVault",e(t,r,o)):["chromex.dispatch","chromex.patch_state","chromex.state"].includes(t.type)}},sendMessage:function(e,t,r){var o;const a=JSON.parse(JSON.stringify({name:e,params:t}));if("undefined"==typeof chrome||n)n&&Promise.resolve().then((()=>browser.runtime.sendMessage(a))).then((e=>{r&&r(e)})).catch((()=>{}));else try{chrome.runtime.sendMessage(a,(function(e){chrome.runtime.lastError,r&&r(e)}))}catch(e){}"undefined"!=typeof chrome&&null!==(o=chrome.runtime)&&void 0!==o&&o.lastError}};class E{constructor(){i(this,"bucket",new Map)}register(e){const t="k-"+Math.random().toString(36).substr(2);return this.bucket.set(t,e),t}invoke(e,...t){const r=this.bucket.get(e);r&&(this.bucket.delete(e),r(...t))}}function s(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return}e.callbackId&&window.messageCallbacks.invoke(e.callbackId,e.data)}window.messageCallbacks||(window.messageCallbacks=new E);let O=function(e){return e.GET="GET",e.SET="SET",e.ACTION="ACTION",e}({}),S=function(e){return e.ADD_ADDRESS="addAddress",e.ADD_CARD="addCard",e.ADD_RECORD="addRecord",e.CLOSE_EDIT_CREATE_MENU_EVENT_LISTENER="closeEditCreateMenuEventListener",e.CLOSE_RECORD_LIST_EVENT_LISTENER="closeRecordListEventListener",e.DO_NOT_ASK="doNotAsk",e.FRAME_FILL="frameFill",e.LAST_INPUT_FIELD="lastInputField",e.LAST_FILL_TIME_ON_INPUT_FIELD_SMH="lastFillTimeOnInputField",e.LINK_CLICKED="linkClicked",e.OPEN_FIXINATOR_NEW_TAB="openFixinatorNewTab",e.REMOVE_FIXINATOR_PROMPT_SMH="removeFixinatorPrompt",e.SET_FIXINATOR_ATTR_FILL_SMH="setFixinatorAttrFill",e.SET_FIXINATOR_LOGIN_FILL_SMH="setFixinatorLoginFill",e.SET_FIXINATOR_REGISTRATION_FILL_SMH="setFixinatorRegistrationFill",e.SET_RECORD_CHANGE_PASSWORD="setRecordChangePassword",e.SET_SMART_FILL="setSmartfill",e.SETUP_NO_FILLING="setupNoFilling",e.SIZE_DRAGGABLE_ELEMENT_ON_HEADER="sizeDraggableElementOnHeader",e.SUCCESSFUL_AUTO_FILL="successfulAutoFill",e.TOGGLE_DRAG_WIDTH_LOCK="toggleDragWidthLock",e.UPDATE_RECORD_LAST_FILLED_SMH="updateRecordLastFilled",e.VAULT_SSO_PAGE="vaultSSOPage",e.OPEN_DEBUG_WINDOW="openDebugWindow",e}({}),c=function(e){return e.ACCOUNT_SHARE_CONFIRMATION="accountShareConfirmation",e.CHANGE_PASSWORD_FORM_SUBMITTED="changePasswordFormSubmitted",e.CHANGE_PASSWORD_REPOSITION="changePasswordReposition",e.CHANGE_PASSWORD_SHOW_REVERT_SCREEN="changePasswordShowRevertScreen",e.CHANGE_TARGETED_LOCK="changeTargetedLock",e.CHECK_CHANGED_PASSWORD="checkChangedPassword",e.CHECK_IF_SSO_LOGIN_SCREEN="checkIfSSOLoginScreen",e.CHECK_SSO_PAGE_ON_PREM="checkSSOPageOnPrem",e.CHECK_SSO_PAGE_CLOUD="checkSSOPageCloud",e.CLEANUP_DETECTION_TESTS="cleanupDetectionTests",e.CLEAR_ALL_STORAGE="clearAllStorage",e.CLEAR_IDB_STORAGE="clearIDBStorage",e.CLEAR_LOCAL_STORAGE="clearLocalStorage",e.CLEAR_THROTTLE_STATE="clearThrottleState",e.CLEAR_LOCAL_STORAGE_DEVLOGS="clearLocalStorageDevlogs",e.CLOSE_EDIT_CREATE_MENU="closeEditCreateMenu",e.CLOSE_FRAME="closeFrame",e.CLOSE_HOVER_DATA="closeHoverData",e.CLOSE_INPUT_HELPER="closeInputHelper",e.CLOSE_RECORD_LIST="closeRecordList",e.CLOSE_TAB_SSO_AMH="closeTabSso",e.CONFIRM_THIS_MESSAGE="confirmThisMessage",e.DEBUG_PAGE="openDebugPage",e.DEVLOGS_ADD="devlogsAdd",e.DISABLE_LOCKS="disableLocks",e.DISPLAY_IFRAME_ERROR_MESSAGE="displayIframeErrorMessage",e.DUO_SELECTION="duoSelection",e.EDIT_DONE="editDone",e.EDIT_MODE="editMode",e.FILL_CUSTOM_FIELDS="fillCustomFields",e.FILL_GIVEN_AUTOFILL_RECORD="fillGivenAutofillRecord",e.FILL_NON_SECURE_SITE="fillNonSecureSite",e.FILL_BASIC_AUTH="fillBasicAuth",e.FRAME_FILL_FIELD="frameFillField",e.GET_INPUT_VALUE_FOR_LOCK="getInputValueForLock",e.GIVE_RECORD_TOTP_IN_CUSTOM_FOR_FILLING="giveRecordTotpInCustomForFilling",e.HANDLE_VAULT_MESSAGE_AMH="handleVaultMessage",e.INIT_INJECTED_SCRIPT="initInjectedScript",e.IS_POPUP_ATTACHED_TO_LOCK="isPopupAttachedToLock",e.LOAD_EXTENSION_CONTENTS="loadExtensionContents",e.MAKE_DRAGGABLE_ELEMENT_UNMOVABLE="makeDraggableElementUnmovable",e.MAKE_VOICE_OVER_ALERT="makeVoiceOverAlert",e.MASTER_PASSWORD_REENTRY_ACTION="masterPasswordReentryAction",e.CHECK_DARK_MODE_META="checkDarkModeMeta",e.USE_DARK_MODE_HEADER="useDarkModeMeta",e.OPEN_PROMPT_FROM_DISABLE_TAB="openPromptFromDisableTab",e.OPEN_PROMPT_FROM_GROUPS="openPromptFromGroupsThunk",e.OPEN_PROMPT_FROM_IS_APPENDED_TO_LOCK="openPromptFromIsAppendedToLock",e.OPEN_PROMPT_FROM_OPEN_TO_SPECIFIC_SCREEN="openPromptFromOpenToSpecificScreen",e.OPEN_PROMPT_FROM_REVERT_SCREEN="openPromptFromRevertScreen",e.OPEN_PROMPT_FROM_SHOW_LOGGED_OUT_KEEPER="openPromptFromShowLoggedOutKeeper",e.OPEN_PROMPT_FROM_SHOW_PROMPT="openPromptFromShowPrompt",e.PING="ping",e.POST_MESSAGE_TO_ALL_IFRAMES="postMessageToAllIframes",e.REMOVE_CONTENT_SCRIPTS_V3="removeContentScripts",e.REMOVE_DO_NOT_PROMPT="remove_do_not_prompt",e.REMOVE_INPUT_OBSERVERS="removeInputObservers",e.REPOSITION_FRAME="repositionFrame",e.REPOSITION_OVERLAY="repositionOverlay",e.REQUEST_ADMIN_APPROVAL="request_admin_approval",e.REQUEST_RESPONSE="requestResponse",e.RESET_EXTENSION="resetExtension",e.RESET_INACTIVITY_TIMEOUT_AMH="resetInactivityTimeout",e.RESTORE_LOCKS="restoreLocks",e.REVERT_MOVABLE_HEADER="revertMovableHeader",e.ROLE_ENFORCEMENT_RESTRICTION="roleEnforcementRestriction",e.SAVE_PROMPT_VIEW_RECORD_SCREEN="savePromptViewRecordScreen",e.SEND_KEEPER_PUSH="send_keeper_push",e.SEND_KEY_TO_INPUT_ON_PAGE="sendKeyToInputOnPage",e.SEND_SEARCH_RESULTS="sendSearchResults",e.SEND_SSO_URL="sendSSOUrl",e.SHOW_CHANGE_PROMPT="showChangePrompt",e.SHOW_CHANGE_PASSWORD_FROM_CS="showChangePasswordFromCS",e.SHOW_EXTENSION_FROM_FRAME="showExtensionFromFrame",e.SHOW_EXTENSION_FROM_FRAME_BY_PROMPT="showExtensionFromFrameByPrompt",e.SHOW_HOVER_DATA="showHoverData",e.SHOW_KEEPER_NOT_APPENDED_TO_LOCK="showKeeperNotAppendedToLock",e.SHOW_INPUT_HELPER="showInputHelper",e.SHOW_LOCAL_STORAGE="showLocalStorage",e.SHOW_IDB_STORAGE="showIDBStorage",e.SHOW_MP_REENTRY_ERROR_POPUP="showMPRentryErrorPopup",e.SHOW_PASSKEY_PROMPT="showPasskeyPrompt",e.SHOW_PROMPT_FROM_FRAME="showPromptFromFrame",e.SHOW_PREVIEW="showPreview",e.SHOW_REVIEW_SAVED_RECORD="showReviewSavedRecord",e.SSO_ACCOUNT_NEEDS_RESOLUTION="ssoAccountNeedsResolution",e.SSO_LOGIN="sso_login",e.TEST_ACTION="testAction",e.TEST_REMOVE_DOMAIN="testRemoveDomain",e.TEST_REMOVE_SUBDOMAIN="testRemoveSubdomain",e.SETUP_DETECTION_TESTS="setupDetectionTests",e.START_OBSERVER="startObserver",e.START_PROMPTS="startPrompts",e.STOP_CHECK_SSO_PAGE_ON_PREM="stopCheckSSOPageOnPrem",e.SUPPLY_TRY_TO_PROMPT="supplyTryToPrompt",e.TOGGLE_LISTENER_FOR_CHANGE_PASSWORD_SUBMISSION="toggleListenerForChangePasswordSubmission",e.TRANSITION_POPUP_OUT="transitionPopupOut",e.TRY_SHOULD_FIXINATOR_PROMPT="tryShouldFixinatorPrompt",e.UPDATE_EXTENSION_CLASSES="updateExtensionClasses",e.UPDATE_INPUT_OBSERVER="updateInputObserver",e.UPDATE_LOCKS_PAYLOAD="updateLocksPayload",e.USE_BACKUP_2FA="useBackup2FA",e.VALIDATE_2FA="validate_2fa",e.VAULT_VERSION_CHECK="vaultVersionCheck",e.WEBAUTHN_RESPONSE="webauthnResponse",e}({});_.addMessageListener((function(e,t,r){switch(e.name){case"setInactivityTimeoutListener":document.addEventListener("keyup",T),document.addEventListener("mousemove",T);break;case"removeInactivityTimeoutListener":document.removeEventListener("keyup",T),document.removeEventListener("mousemove",T);break;case"vaultForceReload":location.reload();break;case"vaultVersionNumber":for(const e of document.head.getElementsByTagName("meta"))if("version"===e.name&&e.content){r({name:e.name,version_number:e.content});break}break;default:((e,t)=>{window.postMessage(e,document.location.origin),t&&t()})(e,r)}})),function e(){if(document&&document.body){var t=document.querySelector('meta[name="version"]').content;_.sendMessage(c.VAULT_VERSION_CHECK,{type:O.ACTION,data:{versionNumber:t}})}else setTimeout(e,10)}(),(n||a)&&window.addEventListener("message",(function(e){var t=e.data;if(document.location.origin===e.origin&&"ext"!==t.client)if("[object Uint8Array]"===Object.prototype.toString.call(t)){var r=Array.from(t);_.sendMessage(c.HANDLE_VAULT_MESSAGE_AMH,{type:O.ACTION,data:r},(function(e){}))}else _.sendMessage(c.HANDLE_VAULT_MESSAGE_AMH,{type:O.ACTION,data:t},(function(e){}))}));const T=t()((e=>{_.sendMessage(c.RESET_INACTIVITY_TIMEOUT_AMH,{type:O.ACTION})}),2e3);window.addEventListener("beforeunload",(function(e){document.querySelector(".sso-title")&&_.sendMessage(S.VAULT_SSO_PAGE,{type:O.SET,data:!0})})),a&&window.addEventListener("pagehide",(function(e){document.querySelector(".sso-title")&&_.sendMessage(S.VAULT_SSO_PAGE,{type:O.SET,data:!0})})),document.addEventListener("keyup",T),document.addEventListener("mousemove",T)})()})();
